<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Questionnaire - Ubiq Docs</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Questionnaire";
        var mkdocs_page_input_path = "eventloggingexperimentquestionnaire.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> Ubiq Docs
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Getting Started</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../gettingubiq/">Getting Ubiq</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../settingupvr/">Setting Up VR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../creatinganetworkedobject/">Creating Networked Objects</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../spawningobjects/">Object Spawning</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../localloopback/">Testing with Local Loopback</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../synchronisation/">Synchronisation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ubiqxrinteraction/">Interaction with Ubiq XR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../serversandrooms/">Servers and Rooms</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../eventlogginggettingstarted/">Logging</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Tutorials</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../3dpentutorial/">Creating a 3D Pen</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../serversetup/">Server</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Advanced</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../xrinteraction/">Interaction</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" >Logging</a>
    <ul class="current">
                <li class="toctree-l2"><a class="reference internal" href="../eventlogging/">Introduction</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../eventloganalysis/">Analysis</a>
                </li>
                <li class="toctree-l2 current"><a class="reference internal current" href="#">Questionnaire</a>
    <ul class="current">
    <li class="toctree-l3"><a class="reference internal" href="#sample-output">Sample Output</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#graceful-exit">Graceful Exit</a>
    </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../eventloggingunittests/">Unit Tests</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../eventloggingcollectorservice/">LogCollector Service</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../eventlogserialisation/">Serialisation and Memory</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Messaging</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../messaging/">Introduction</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../networkids/">Network Ids</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../generatinguniqueids/">Generating Unique Ids</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../networkidtype/">Types</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../reservedids/">Reserved IDs</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../webrtc/">WebRtc</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Servers and Rooms</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../serverintroduction/">Introduction</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../serveroverview/">Server Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../serverheartbeat/">Heartbeat and Timeouts</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../leavingandjoiningrooms/">Leaving and Joining</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../botssample/">Bots</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Programming</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../asyncdesignpatterns/">Async Design Patterns</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Development</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../packaging/">Packaging</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../nexus/">Nexus</a>
                  </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../mkdocs/">Meta</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Ubiq Docs</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Advanced</li>
          <li class="breadcrumb-item">Logging</li>
      <li class="breadcrumb-item active">Questionnaire</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="questionnaire">Questionnaire</h1>
<p>The Questionnaire Sample (Samples/Single/Questionnaire) shows how the Event Logging System may be used to collect questionnaire responses.</p>
<p>This scene contains a panel with an example Component, <code>Questionnaire</code> attached to it. The Component iterates over all <code>Slider</code> instances under its <code>GameObject</code>, and uses an <code>ExperimentLogEmitter</code> to write their values when the user clicks <em>Done</em>.</p>
<pre><code>public class Questionnaire : MonoBehaviour
{
    LogEmitter results;

    // Start is called before the first frame update
    void Start()
    {
        results = new ExperimentLogEmitter(this);
    }

    public void Done()
    {
        foreach (var item in GetComponentsInChildren&lt;Slider&gt;())
        {
            results.Log(&quot;Answer&quot;, item.name, item.value);
        }
    }

}
</code></pre>
<p><img alt="The Questionnaire Sample Scene in the Editor" src="../images/3b19e567-c18b-47bb-809f-6276c22a64be.png" /></p>
<p>The Questionnaire can be completed locally in Play Mode. Alternatively, the scene can be run remotely, and the experimentor in the Editor can join the same room as the remote copy. In either case, the experimentor in the Editor can click <em>Start Collection</em> on the <code>NetworkScene</code> &gt; <code>Log Manager</code> &gt; <code>LogCollector</code> to recieve the Questionnaire results.</p>
<p>The experimentor can click <em>Start Collection</em> before or after the questionnaire has been completed, and the participant can complete the Questionnaire before or after joining the room. In all cases the results will be receieved correctly.</p>
<h3 id="sample-output">Sample Output</h3>
<p>Below is the resulting <em>Experiment</em> log file from an application built with the Questionnaire scene.</p>
<pre><code>[
{&quot;ticks&quot;:637795003787005516,&quot;peer&quot;:&quot;f7d98080-7c7b05ca&quot;,&quot;event&quot;:&quot;Answer&quot;,&quot;arg1&quot;:&quot;Slider 1&quot;,&quot;arg2&quot;:0.707253},
{&quot;ticks&quot;:637795003787045512,&quot;peer&quot;:&quot;f7d98080-7c7b05ca&quot;,&quot;event&quot;:&quot;Answer&quot;,&quot;arg1&quot;:&quot;Slider 2&quot;,&quot;arg2&quot;:0.30657154},
{&quot;ticks&quot;:637795003787045512,&quot;peer&quot;:&quot;f7d98080-7c7b05ca&quot;,&quot;event&quot;:&quot;Answer&quot;,&quot;arg1&quot;:&quot;Slider 3&quot;,&quot;arg2&quot;:0.7034317}
]
</code></pre>
<p>The Questionnaire was filled in on an Oculus Quest, after joining the same room as a user running the same scene in the Unity Editor. As soon as the Questionnaire was completed, the Unity Editor user could find the <em>Experiment</em> log by clicking the <em>Open Folder</em> button of the <code>LogCollector</code> Component in the Editor.</p>
<p><img alt="Log Collector Inspector at Runtime" src="../images/d7937ef2-069b-40e2-b596-1ceccd749a24.png" /></p>
<p>Since no filters were set up on the <code>LogManager</code>, a <em>Debug</em> log for the session is also created in the same folder.</p>
<pre><code>[
{&quot;ticks&quot;:637795043778071253,&quot;peer&quot;:&quot;cbc6f82b-24ec48b3&quot;,&quot;type&quot;:&quot;Ubiq.Messaging.NetworkScene&quot;,&quot;event&quot;:&quot;Awake&quot;,&quot;arg1&quot;:&quot;DESKTOP-F1J0MRR&quot;,&quot;arg2&quot;:&quot;System Product Name (ASUS)&quot;,&quot;arg3&quot;:&quot;f73fe01b1e21031d49274a1491d1d6b5714c92e9&quot;},
{&quot;ticks&quot;:637795044161926844,&quot;peer&quot;:&quot;cbc6f82b-24ec48b3&quot;,&quot;type&quot;:&quot;Ubiq.Samples.NetworkSpawner&quot;,&quot;objectid&quot;:&quot;7725a971-a3692643&quot;,&quot;componentid&quot;:49018,&quot;event&quot;:&quot;SpawnObject&quot;,&quot;arg1&quot;:2,&quot;arg2&quot;:&quot;1e38967c-7a5701a3&quot;,&quot;arg3&quot;:true},
{&quot;ticks&quot;:637795044161966844,&quot;peer&quot;:&quot;cbc6f82b-24ec48b3&quot;,&quot;type&quot;:&quot;Ubiq.Voip.VoipPeerConnectionManager&quot;,&quot;objectid&quot;:&quot;cbc6f82b-24ec48b3&quot;,&quot;componentid&quot;:50,&quot;event&quot;:&quot;CreatePeerConnectionForPeer&quot;,&quot;arg1&quot;:&quot;2a865340-80169ce2&quot;,&quot;arg2&quot;:&quot;4641730f-148936d7&quot;},
{&quot;ticks&quot;:637795044162026839,&quot;peer&quot;:&quot;cbc6f82b-24ec48b3&quot;,&quot;type&quot;:&quot;Ubiq.Voip.VoipPeerConnectionManager&quot;,&quot;objectid&quot;:&quot;cbc6f82b-24ec48b3&quot;,&quot;componentid&quot;:50,&quot;event&quot;:&quot;RequestPeerConnection&quot;,&quot;arg1&quot;:&quot;2a865340-80169ce2&quot;,&quot;arg2&quot;:&quot;4641730f-148936d7&quot;},
{&quot;ticks&quot;:637795044162066856,&quot;peer&quot;:&quot;cbc6f82b-24ec48b3&quot;,&quot;type&quot;:&quot;Ubiq.Samples.NetworkSpawner&quot;,&quot;objectid&quot;:&quot;7725a971-a3692643&quot;,&quot;componentid&quot;:49018,&quot;event&quot;:&quot;SpawnObject&quot;,&quot;arg1&quot;:2,&quot;arg2&quot;:&quot;effadbc0-a6beab2b&quot;,&quot;arg3&quot;:false},
{&quot;ticks&quot;:637795043937235620,&quot;peer&quot;:&quot;4641730f-148936d7&quot;,&quot;type&quot;:&quot;Ubiq.Messaging.NetworkScene&quot;,&quot;event&quot;:&quot;Awake&quot;,&quot;arg1&quot;:&quot;Oculus Quest&quot;,&quot;arg2&quot;:&quot;Oculus Quest&quot;,&quot;arg3&quot;:&quot;b8db4746286db62ecad4c6fa13f17ab6&quot;},
{&quot;ticks&quot;:637795044080181550,&quot;peer&quot;:&quot;4641730f-148936d7&quot;,&quot;type&quot;:&quot;Ubiq.Samples.NetworkSpawner&quot;,&quot;objectid&quot;:&quot;7725a971-a3692643&quot;,&quot;componentid&quot;:49018,&quot;event&quot;:&quot;SpawnObject&quot;,&quot;arg1&quot;:2,&quot;arg2&quot;:&quot;effadbc0-a6beab2b&quot;,&quot;arg3&quot;:true},
{&quot;ticks&quot;:637795044152929360,&quot;peer&quot;:&quot;4641730f-148936d7&quot;,&quot;type&quot;:&quot;Ubiq.Voip.VoipPeerConnectionManager&quot;,&quot;objectid&quot;:&quot;4641730f-148936d7&quot;,&quot;componentid&quot;:50,&quot;event&quot;:&quot;CreatePeerConnectionForRequest&quot;,&quot;arg1&quot;:&quot;2a865340-80169ce2&quot;},
{&quot;ticks&quot;:637795044153061850,&quot;peer&quot;:&quot;4641730f-148936d7&quot;,&quot;type&quot;:&quot;Ubiq.Samples.NetworkSpawner&quot;,&quot;objectid&quot;:&quot;7725a971-a3692643&quot;,&quot;componentid&quot;:49018,&quot;event&quot;:&quot;SpawnObject&quot;,&quot;arg1&quot;:2,&quot;arg2&quot;:&quot;1e38967c-7a5701a3&quot;,&quot;arg3&quot;:false}
]
</code></pre>
<h3 id="graceful-exit">Graceful Exit</h3>
<p>The Questionnaire Panel also has a Quit button. This button makes use of the LogCollector WaitForTransmitComplete method to quit the application, but only when the questionnaire results have been successfully delivered.</p>
<pre><code>        public void Quit()
        {
            LogCollector.Find(this).WaitForTransmitComplete(results.EventType, ready =&gt;
            {
                if(!ready)
                {
                    // Here it may be desirable to to save the logs another way
                    Debug.LogWarning(&quot;ActiveCollector changed or went away: cannot confirm logs have been delivered!&quot;);
                }
#if UNITY_EDITOR
                UnityEditor.EditorApplication.isPlaying = false;
#else
                Application.Quit();
#endif
            });
        }
</code></pre>
<p>The callback will only be called once the Experiment logs have left the local LogCollector.</p>
<p>Enter Play Mode, click Done, then click Quit. </p>
<p>Since the LogCollector is buffering, the application won't exit because the Log Events are still in Memory. Click Start Collection and the application will immediately write the logs and exit.</p>
<p><img alt="Log Collector Showing Events in Buffer" src="../images/8e10788d-eca6-4009-b673-d4c34ad7f6a0.png" /></p>
<p>Try as well again entering Play Mode, and clicking Done and Quit. This time however join a Room with a LogCollector on another Peer. As soon as that Peer's LogCollector is Started, the Questionnaire will quit. </p>
<p>If the LogCollector on the other Peer is already active (e.g. in the case of a running logcollectorservice), the application will quit almost as soon as it joins the Room.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../eventloganalysis/" class="btn btn-neutral float-left" title="Analysis"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../eventloggingunittests/" class="btn btn-neutral float-right" title="Unit Tests">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../eventloganalysis/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../eventloggingunittests/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
